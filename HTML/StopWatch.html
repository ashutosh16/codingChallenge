<!DOCTYPE html>
<head>
    <style>
        .time {
            font-family: 'Times New Roman', Times, serif;
            font-size: 40px;
            letter-spacing: 5px;

        }
        .btn {
            width: 50px;
            height: 30px;
            text-align: center;
            transform: translate(-50%);
        }
    </style>
</head>
<body>
    <section class="stop-watch-section">
        <h1>Stop Watch</h1>
        <div role="stop watch container" class="stop-watch-container">
            <span id="min" role="minutes" class="time">00 -- </span>
            <span id="sec" role="Seconds" class="time">00 -- </span>
            <span id="milisec" role="Mili seconds" class="time">00</span>
        </div>
        <div class="btn-container">
            <span id="start" role="button" class="btn">Start</span>
            <span id="stop" role="button" class="btn">Stop</span>
            <span id="reset" role="button" class="btn">Reset</span>
        </div>
        
    </section>
    <script>
    
    {
        function StopWatch(el) {
            let value = null;
            let watchTimer = null;

            let updateWatch = () => {
                let [min, sec, milliSec] = el.querySelectorAll(".stop-watch-container .time");
                 min.textContent = `${timer.getMinutes()} -- `;
                 sec.textContent = `${timer.getSeconds()} -- `;
                 milliSec.textContent = `${timer.getMilliseconds().toString().slice(0,2)}`;
            };

            let start = () => {
                let startTime = value 
                                ? new Date(new Date() - new Date(value))
                                : new Date();

                let runWatch = () => {
                    watchTimer = setTimeout( ()=> {
                        value = new Date() - startTime;
                        updateWatch(new Date(value));
                        runWatch();
                    },10);
                }                            

                runWatch();
            }

            let stop = () => {
                watchTimer && clearTimeout(watchTimer);
            }

            let reset = () => {
                watchTimer && clearTimeout(watchTimer);
                updateWatch();
            }

            return {
                start,
                stop,
                reset
            }
        }
        let stopWatch = StopWatch(documet.querySelector(".stop-watch-container"));
        document.querySelector("#start").addEventListener("click", stopWatch.start);
        document.querySelector("#stop").addEventListener("click", stopWatch.stop);
        document.querySelector("#reset").addEventListener("click", stopWatch.reset);
    }
       
    </script>
    
    
<!--     <script>
    {
        
        function Timer(startTime){
            let interval = setInterval(() =>{
                let [min, sec, milliSec] = document.querySelectorAll(".stop-watch-container .time");
                let timer = new Date() - startTime;
                timer = new Date(timer);
                min.textContent = `${timer.getMinutes()} -- `;
                sec.textContent = `${timer.getSeconds()} -- `;
                milliSec.textContent = `${timer.getMilliseconds().toString().slice(0,2)}`;
            }, 100);
                
            return interval;
        }

        function CreateStopWatch(){
            let startTime = null;
            let startStopWatch = function(event) {

                startTime = (event.target.id !== "reset" && startTime)
                            ? startTime
                            : new Date();
                
                let stopWatchTimer = Timer(startTime);

                document.querySelector("#stop").addEventListener("click", () => {
                    clearInterval(stopWatchTimer);
                });

                document.querySelector("#reset").addEventListener("click", () => {
                    clearInterval(stopWatchTimer);
                    stopWatchTimer = Timer(new Date());
                });
            
            }
            
            document.querySelector("#start").addEventListener("click", startStopWatch);
        }

        CreateStopWatch();
    }
    </script> -->
    
</body>
</html>
